<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Debug - Mi Escena Babylon.js</title>

        <!-- Babylon.js -->
        <script src="https://cdn.babylonjs.com/babylon.js"></script>
        <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.js"></script>

        <style>
            html, body {
                overflow: hidden;
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                font-family: Arial, sans-serif;
            }

            #renderCanvas {
                width: 100%;
                height: 80%;
                touch-action: none;
            }
            
            #debug {
                height: 20%;
                background: black;
                color: lime;
                overflow-y: auto;
                padding: 10px;
                font-size: 12px;
            }
        </style>
    </head>
<body>
    <canvas id="renderCanvas"></canvas>
    <div id="debug">
        <div id="log">üîç Iniciando diagn√≥stico...</div>
    </div>

    <script>
        // Funci√≥n para mostrar mensajes de debug
        function log(message) {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += '<br>' + new Date().toLocaleTimeString() + ': ' + message;
            console.log(message);
        }

        var canvas = document.getElementById("renderCanvas");
        var engine = new BABYLON.Engine(canvas, true);

        var createScene = function () {
            var scene = new BABYLON.Scene(engine);

            // C√°mara y luz b√°sicas
            var camera = new BABYLON.ArcRotateCamera("camera", 0, Math.PI / 3, 10, BABYLON.Vector3.Zero(), scene);
            camera.attachControl(canvas, true);
            var light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);

            // Suelo para referencia
            var ground = BABYLON.MeshBuilder.CreateGround("ground", {width: 10, height: 10}, scene);
            var groundMat = new BABYLON.StandardMaterial("groundMat", scene);
            groundMat.diffuseColor = new BABYLON.Color3(0.5, 0.5, 0.5);
            ground.material = groundMat;

            // URL base - CAMBIA ESTA POR LA TUYA
            const baseURL = "https://github.com/JuanD-20/babylonscene/";
            const models = ["casa.obj", "coco.obj", "chiguiro.obj"];

            log("üåê URL base: " + baseURL);
            log("üì¶ Intentando cargar " + models.length + " modelos...");

            // Crear esferas de referencia para ver si al menos algo aparece
            models.forEach((modelName, index) => {
                // Esfera de referencia
                const sphere = BABYLON.MeshBuilder.CreateSphere("ref" + index, {diameter: 0.5}, scene);
                sphere.position.x = index * 3 - 3;
                sphere.position.y = 2;
                const sphereMat = new BABYLON.StandardMaterial("refMat" + index, scene);
                sphereMat.diffuseColor = new BABYLON.Color3(1, 0, 0);
                sphere.material = sphereMat;

                log("üî¥ Esfera de referencia creada en X=" + sphere.position.x);

                // Intentar cargar modelo
                log("‚è≥ Cargando: " + baseURL + modelName);
                
                BABYLON.SceneLoader.ImportMeshAsync("", baseURL, modelName).then((result) => {
                    log("‚úÖ √âXITO: " + modelName + " cargado!");
                    log("üìä Meshes encontrados: " + result.meshes.length);
                    
                    if (result.meshes.length > 1 && result.meshes[1]) {
                        result.meshes[1].position.x = index * 3 - 3;
                        result.meshes[1].position.y = 0;
                        result.meshes[1].scaling = new BABYLON.Vector3(0.5, 0.5, 0.5);
                        log("üìç Posicionado en X=" + result.meshes[1].position.x);
                        
                        // Ocultar esfera de referencia ya que el modelo carg√≥
                        sphere.dispose();
                    } else {
                        log("‚ö†Ô∏è Advertencia: " + modelName + " no tiene mesh[1]");
                    }
                }).catch((error) => {
                    log("‚ùå ERROR cargando " + modelName + ": " + error.message);
                    log("üîç Verifica que el archivo existe en: " + baseURL + modelName);
                });
            });

            return scene;
        };

        var scene = createScene();

        engine.runRenderLoop(function () {
            scene.render();
        });

        window.addEventListener("resize", function () {
            engine.resize();
        });

        log("üöÄ Motor inicializado");
    </script>
</body>
</html>


